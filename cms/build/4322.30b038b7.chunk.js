"use strict";(self.webpackChunkprojectdes_cms=self.webpackChunkprojectdes_cms||[]).push([[4322],{3128:($,x,t)=>{t.d(x,{B:()=>j,D:()=>R,H:()=>C,R:()=>N});var r=t(92132),M=t(42455),s=t(4198),A=t(55356),D=t(38413),S=t(83997),E=t(30893),p=t(21247),u=t(46270),v=t(9005),m=t(54894),O=t(70573),k=t(25524),I=t(63891);const w=(0,I.default)(S.s)`
  svg path {
    fill: ${({theme:y})=>y.colors.neutral600};
  }
`,U=({name:y})=>(0,r.jsxs)(S.s,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,p.a8)(300),children:[(0,r.jsx)(w,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6,children:(0,r.jsx)(v.A,{width:`${8/16}rem`})}),(0,r.jsx)(E.o,{fontWeight:"bold",children:y})]}),R=()=>(0,r.jsx)(O.P,{renderItem:y=>{if(y.type===k.D.STAGE)return(0,r.jsx)(U,{name:typeof y.item=="string"?y.item:null})}}),N=({children:y})=>(0,r.jsx)(M.P,{children:(0,r.jsx)(D.g,{tabIndex:-1,children:(0,r.jsx)(s.s,{children:y})})}),j=({href:y})=>{const{formatMessage:z}=(0,m.A)();return(0,r.jsx)(p.N_,{startIcon:(0,r.jsx)(u.A,{}),to:y,children:z({id:"global.back",defaultMessage:"Back"})})},C=({title:y,subtitle:z,navigationAction:X,primaryAction:q})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.x7,{name:y}),(0,r.jsx)(A.Q,{navigationAction:X,primaryAction:q,title:y,subtitle:z})]})},34540:($,x,t)=>{t.d(x,{u:()=>M});var r=t(39906);function M(s={}){const{id:A="",...D}=s,{data:S,isLoading:E}=(0,r.c)({id:A,populate:"stages",...D}),[p]=(0,r.d)(),[u]=(0,r.e)(),[v]=(0,r.f)(),{workflows:m,meta:O}=S??{};return{meta:O,workflows:m,isLoading:E,createWorkflow:p,updateWorkflow:u,deleteWorkflow:v}}},35658:($,x,t)=>{t.d(x,{a:()=>A,g:()=>s});var r=t(57438),M=t(25524);function s(D){if(!D)return null;const E=Object.entries(r._.colors).filter(([,p])=>p.toUpperCase()===D.toUpperCase()).reduce((p,[u])=>(M.S?.[u]&&(p=u),p),null);return E?{themeColorName:E,name:M.S[E]}:null}function A(){return Object.entries(M.S).map(([D,S])=>({hex:r._.colors[D].toUpperCase(),name:S}))}},44716:($,x,t)=>{t.d(x,{u:()=>E});var r=t(21272),M=t(21247),s=t(70573);const A=s.n.injectEndpoints({endpoints:p=>({getComponents:p.query({query:()=>({url:"/content-manager/components",method:"GET"}),transformResponse:u=>u.data}),getContentTypes:p.query({query:()=>({url:"/content-manager/content-types",method:"GET"}),transformResponse:u=>u.data})}),overrideExisting:!1}),{useGetComponentsQuery:D,useGetContentTypesQuery:S}=A;function E(){const{_unstableFormatAPIError:p}=(0,M.wq)(),u=(0,M.hN)(),v=D(),m=S();r.useEffect(()=>{m.error&&u({type:"warning",message:p(m.error)})},[m.error,p,u]),r.useEffect(()=>{v.error&&u({type:"warning",message:p(v.error)})},[v.error,p,u]);const O=v.isLoading||m.isLoading,k=r.useMemo(()=>(m?.data??[]).filter(w=>w.kind==="collectionType"&&w.isDisplayed),[m?.data]),I=r.useMemo(()=>(m?.data??[]).filter(w=>w.kind!=="collectionType"&&w.isDisplayed),[m?.data]);return{isLoading:O,components:r.useMemo(()=>v?.data??[],[v?.data]),collectionTypes:k,singleTypes:I}}},47492:($,x,t)=>{t.d(x,{u:()=>D});var r=t(21272),M=t(21247),s=t(54894),A=t(70573);const D=(S={},E)=>{const{locale:p}=(0,s.A)(),u=(0,M.QM)(p,{sensitivity:"base"}),{data:v,error:m,isError:O,isLoading:k,refetch:I}=(0,A.z)(S,E);return{roles:r.useMemo(()=>[...v??[]].sort((U,R)=>u.compare(U.name,R.name)),[v,u]),error:m,isError:O,isLoading:k,refetch:I}}},65260:($,x,t)=>{t.d(x,{S:()=>et,W:()=>at,a:()=>$e,b:()=>he,c:()=>fe,d:()=>xe,e:()=>ke,f:()=>Ie,g:()=>Le,h:()=>ge,i:()=>be,j:()=>Fe,k:()=>Ne,l:()=>Ce,r:()=>je,s:()=>ze,u:()=>Se,v:()=>ot});var r=t(21272),M=t(70573),s=t(92132),A=t(57237),D=t(44604),S=t(60888),E=t(94061),p=t(90151),u=t(68074),v=t(88353),m=t(83997),O=t(56654),k=t(48323),I=t(7537),w=t(30893),U=t(98765),R=t(21247),N=t(54894),j=t(82437),C=t(63891),y=t(39116),z=t(90625),X=t(85641),q=t(43206),ye=t(33544),ce=t(5336),H=t(56936),F=t(61535),De=t(25801),i=t(25524),ee=t(35658),L=t(70653),Oe=t(56336),_e=t(88761),Pe=t(48940),T=t(12083);function Se(e,a){const n=(0,M.Q)();(0,r.useEffect)(()=>{n.injectReducer(e,a)},[n,e,a])}function Te(e){return{type:i.j,payload:{id:e}}}function Ce({workflow:e}){return{type:i.A,payload:e}}function xe({workflows:e}){return{type:i.c,payload:e}}function Ae(e){return{type:i.k,payload:{stageId:e}}}function ge(e){return{type:i.d,payload:e}}function te(e,a){return{type:i.l,payload:{stageId:e,...a}}}function Re(e){return{type:i.m,payload:e}}function We(e,a){return{type:i.n,payload:{newIndex:a,oldIndex:e}}}function ue(e){return{type:i.i,payload:e}}function je(){return{type:i.e}}function ke(e){return{type:i.f,payload:e}}function Ie(e){return{type:i.g,payload:e}}function Le(e){return{type:i.h,payload:e}}const se=(0,C.default)(q.A)`
  > circle {
    fill: ${({theme:e})=>e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Be=(0,C.default)(E.a)`
  border-radius: 26px;

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};

    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${w.o} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${se} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }

  &:active {
    ${w.o} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${se} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`,pe=({children:e,...a})=>(0,s.jsx)(Be,{as:"button",background:"neutral0",border:"neutral150",paddingBottom:3,paddingLeft:4,paddingRight:4,paddingTop:3,shadow:"filterShadow",...a,children:(0,s.jsxs)(m.s,{gap:2,children:[(0,s.jsx)(se,{"aria-hidden":!0}),(0,s.jsx)(w.o,{variant:"pi",fontWeight:"bold",textColor:"neutral500",children:e})]})});pe.propTypes={children:ye.node.isRequired};const G={serverState:{contentTypes:{collectionTypes:[],singleTypes:[]},roles:[],workflow:null,workflows:[]},clientState:{currentWorkflow:{data:{name:"",contentTypes:[],stages:[],permissions:void 0}},isLoading:!0}};function be(e=G,a){return(0,_e.jM)(e,n=>{const{payload:c}=a;switch(a.type){case i.f:{n.serverState.contentTypes=c;break}case i.h:{n.clientState.isLoading=c;break}case i.g:{n.serverState.roles=c;break}case i.A:{const o=c;o&&(n.serverState.workflow=o,n.clientState.currentWorkflow.data={...o,stages:o.stages.map(d=>({...d,color:d?.color??i.b}))});break}case i.c:{n.serverState.workflows=c;break}case i.e:{n.clientState=G.clientState,n.serverState=(0,_e.mq)(G.serverState);break}case i.k:{const{stageId:o}=c,{currentWorkflow:d}=e.clientState;n.clientState.currentWorkflow.data.stages=d.data.stages?.filter(f=>(f?.id??f.__temp_key__)!==o);break}case i.d:{const{currentWorkflow:o}=e.clientState;o.data||(n.clientState.currentWorkflow.data={stages:[]});const d=me(n.clientState.currentWorkflow.data.stages);n.clientState.currentWorkflow.data.stages?.push({...c,color:c?.color??i.b,__temp_key__:d});break}case i.j:{const{currentWorkflow:o}=e.clientState,{id:d}=c,f=o.data.stages?.findIndex(h=>(h?.id??h?.__temp_key__)===d);if(f!==void 0&&f!==-1){const h=o.data.stages?.[f];n.clientState.currentWorkflow.data.stages?.splice(f+1,0,{...h,id:void 0,__temp_key__:me(n.clientState.currentWorkflow.data.stages)})}break}case i.l:{const{currentWorkflow:o}=e.clientState,{stageId:d,...f}=c;n.clientState.currentWorkflow.data.stages=o.data.stages?.map(h=>(h.id??h.__temp_key__)===d?{...h,...f}:h);break}case i.m:{const{currentWorkflow:o}=e.clientState;n.clientState.currentWorkflow.data.stages=o.data.stages?.map(d=>({...d,...c}));break}case i.n:{const{currentWorkflow:{data:{stages:o}}}=e.clientState,{newIndex:d,oldIndex:f}=c;if(o&&d>=0&&d<o.length){const h=o[f],W=[...o];W.splice(f,1),W.splice(d,0,h),n.clientState.currentWorkflow.data.stages=W}break}case i.i:{n.clientState.currentWorkflow.data={...n.clientState.currentWorkflow.data,...c};break}}})}const me=(e=[])=>{const a=e.map(n=>Number(n.id??n.__temp_key__));return Math.max(...a,-1)+1},B=e=>e[i.R]??G,Ke=(0,L.Mz)(B,({serverState:{contentTypes:e}})=>e),fe=(0,L.Mz)(B,({serverState:{roles:e}})=>e),he=(0,L.Mz)(B,({clientState:{currentWorkflow:e}})=>e.data),Ue=(0,L.Mz)(B,({serverState:{workflows:e}})=>e),$e=(0,L.Mz)(B,({serverState:e,clientState:{currentWorkflow:a}})=>!Oe(e.workflow,a.data)),Ne=(0,L.Mz)(B,({serverState:e,clientState:{currentWorkflow:a}})=>!(e.workflow?.stages??[]).every(n=>!!a.data.stages?.find(({id:c})=>c===n.id))),ze=(0,L.Mz)(B,({clientState:{isLoading:e}})=>e),Fe=(0,L.Mz)(B,({serverState:e})=>e),Ye=(0,C.default)(O.fe)`
  padding-left: ${({theme:e})=>e.spaces[7]};
`,He=(0,C.default)(m.s)`
  > * {
    flex-grow: 1;
  }
`,Ge=(0,C.default)(ce.Dr)`
  color: ${({theme:e})=>e.colors.danger600};
`,Ve=(0,C.default)(H.l9)`
  :hover,
  :focus {
    background-color: ${({theme:e})=>e.colors.neutral100};
  }

  > span {
    font-size: 0;
  }
`,Qe=(0,C.default)(v.K)`
  align-items: center;
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;

  :hover,
  :focus {
    background-color: ${({theme:e})=>e.colors.neutral100};
  }

  svg {
    height: auto;
    width: ${({theme:e})=>e.spaces[3]}};
  }
`,Je=(0,ee.a)(),Ze=()=>(0,s.jsx)(E.a,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",display:"block",hasRadius:!0,padding:6,shadow:"tableShadow"}),Xe=({id:e,index:a,canDelete:n,canReorder:c,canUpdate:o,isOpen:d=!1,stagesCount:f})=>{const h=l=>`${l+1} of ${f}`,W=l=>{_(g({id:"dnd.grab-item",defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:b.value,position:h(l)}))},ae=l=>{_(g({id:"dnd.drop-item",defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:b.value,position:h(l)}))},V=()=>{_(g({id:"dnd.cancel-item",defaultMessage:"{item}, dropped. Re-order cancelled."},{item:b.value}))},oe=(l,K)=>{_(g({id:"dnd.reorder",defaultMessage:"{item}, moved. New position in list: {position}."},{item:b.value,position:h(l)})),P(We(K,l))},ne=()=>{ie(!0)},[Q,_]=r.useState(null),{formatMessage:g}=(0,N.A)(),{trackUsage:re}=(0,R.z1)(),P=(0,j.wA)(),nt=(0,R.hN)(),[le,rt]=r.useState(d),[lt,ie]=r.useState(!1),[b,Ee,it]=(0,F.Mt)(`stages.${a}.name`),[J,Me,dt]=(0,F.Mt)(`stages.${a}.color`),[Y,ve,ct]=(0,F.Mt)(`stages.${a}.permissions`),_t=(0,j.d4)(fe),[{handlerId:gt,isDragging:ut,handleKeyDown:pt},mt,ft,ht,we]=(0,M.T)(c,{index:a,item:{index:a,name:b.value},onGrabItem:W,onDropItem:ae,onMoveItem:oe,onCancel:V,type:i.D.STAGE}),Et=(0,M.V)(mt,ft),Mt=Je.map(({hex:l,name:K})=>({value:l,label:g({id:"Settings.review-workflows.stage.color.name",defaultMessage:"{name}"},{name:K}),color:l})),{themeColorName:vt}=(0,ee.g)(J.value)??{},de=_t?.filter(l=>l.code!=="strapi-super-admin");return r.useEffect(()=>{we((0,De.n)(),{captureDraggingState:!1})},[we,a]),(0,s.jsxs)(E.a,{ref:l=>Et(l),children:[Q&&(0,s.jsx)(U.s,{"aria-live":"assertive",children:Q}),ut?(0,s.jsx)(Ze,{}):(0,s.jsxs)(A.n,{size:"S",variant:"primary",onToggle:()=>{rt(!le),le||re("willEditStage")},expanded:le,shadow:"tableShadow",error:Ee.error??Me?.error??ve?.error,hasErrorMessage:!1,children:[(0,s.jsx)(S.P,{title:b.value,togglePosition:"left",action:(n||o)&&(0,s.jsxs)(m.s,{children:[(0,s.jsxs)(H.bL,{children:[(0,s.jsxs)(Ve,{size:"S",endIcon:null,paddingLeft:2,paddingRight:2,children:[(0,s.jsx)(X.A,{"aria-hidden":!0,focusable:!1}),(0,s.jsx)(U.s,{as:"span",children:g({id:"[tbdb].components.DynamicZone.more-actions",defaultMessage:"More actions"})})]}),(0,s.jsx)(H.UC,{popoverPlacement:"bottom-end",zIndex:2,children:(0,s.jsxs)(H.x8,{children:[o&&(0,s.jsx)(ce.Dr,{onClick:()=>P(Te(e)),children:g({id:"Settings.review-workflows.stage.delete",defaultMessage:"Duplicate stage"})}),n&&(0,s.jsx)(Ge,{onClick:()=>P(Ae(e)),children:g({id:"Settings.review-workflows.stage.delete",defaultMessage:"Delete"})})]})})]}),o&&(0,s.jsx)(Qe,{background:"transparent",forwardedAs:"div",hasRadius:!0,role:"button",noBorder:!0,tabIndex:0,"data-handler-id":gt,ref:ht,label:g({id:"Settings.review-workflows.stage.drag",defaultMessage:"Drag"}),onClick:l=>l.stopPropagation(),onKeyDown:pt,children:(0,s.jsx)(y.A,{})})]})}),(0,s.jsx)(D.u,{padding:6,background:"neutral0",hasRadius:!0,children:(0,s.jsxs)(p.x,{gap:4,children:[(0,s.jsx)(u.E,{col:6,children:(0,s.jsx)(I.k,{...b,id:b.name,disabled:!o,label:g({id:"Settings.review-workflows.stage.name.label",defaultMessage:"Stage name"}),error:Ee.error??!1,onChange:l=>{it.setValue(l.target.value),P(te(e,{name:l.target.value}))},required:!0})}),(0,s.jsx)(u.E,{col:6,children:(0,s.jsx)(k.Z,{disabled:!o,error:Me?.error??!1,id:J.name,required:!0,label:g({id:"content-manager.reviewWorkflows.stage.color",defaultMessage:"Color"}),onChange:l=>{dt.setValue(l),P(te(e,{color:String(l)}))},value:J.value.toUpperCase(),startIcon:(0,s.jsx)(m.s,{as:"span",height:2,background:J.value,borderColor:vt==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),children:Mt.map(({value:l,label:K,color:Z})=>{const{themeColorName:wt}=(0,ee.g)(Z)||{};return(0,s.jsx)(k.eY,{value:l,startIcon:(0,s.jsx)(m.s,{as:"span",height:2,background:Z,borderColor:wt==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),children:K},l)})})}),(0,s.jsx)(u.E,{col:6,children:de?.length===0?(0,s.jsx)(R.WT,{description:{id:"Settings.review-workflows.stage.permissions.noPermissions.description",defaultMessage:"You don\u2019t have the permission to see roles"},intlLabel:{id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"},name:Y.name}):(0,s.jsxs)(m.s,{alignItems:"flex-end",gap:3,children:[(0,s.jsx)(He,{grow:1,children:(0,s.jsx)(O.KF,{...Y,disabled:!o,error:ve.error??!1,id:Y.name,label:g({id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"}),onChange:l=>{const K=l.map(Z=>({role:parseInt(Z,10),action:"admin::review-workflows.stage.transition"}));ct.setValue(K),P(te(e,{permissions:K}))},placeholder:g({id:"Settings.review-workflows.stage.permissions.placeholder",defaultMessage:"Select a role"}),required:!0,value:(Y.value??[]).map(l=>`${l.role}`),withTags:!0,children:(0,s.jsx)(O.np,{label:g({id:"Settings.review-workflows.stage.permissions.allRoles.label",defaultMessage:"All roles"}),values:de?.map(l=>`${l.id}`),children:de?.map(l=>(0,s.jsx)(Ye,{value:`${l.id}`,children:l.name},l.id))})})}),(0,s.jsx)(v.K,{disabled:!o,icon:(0,s.jsx)(z.A,{}),label:g({id:"Settings.review-workflows.stage.permissions.apply.label",defaultMessage:"Apply to all stages"}),size:"L",variant:"secondary",onClick:()=>ne()})]})})]})})]}),(0,s.jsx)(R.TM.Root,{iconRightButton:null,isOpen:lt,onToggleDialog:()=>ie(!1),onConfirm:()=>{P(Re({permissions:Y.value})),ie(!1),nt({type:"success",message:g({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy.success",defaultMessage:"Applied roles to all other stages of the workflow"})})},variantRightButton:"default",children:(0,s.jsx)(R.TM.Body,{children:(0,s.jsx)(w.o,{textAlign:"center",variant:"omega",children:g({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy",defaultMessage:"Roles that can change that stage will be applied to all the other stages."})})})})]})},qe=(0,C.default)(E.a)`
  transform: translateX(-50%);
`,et=({canDelete:e=!0,canUpdate:a=!0,stages:n=[]})=>{const{formatMessage:c}=(0,N.A)(),o=(0,j.wA)(),{trackUsage:d}=(0,R.z1)();return(0,s.jsxs)(m.s,{direction:"column",gap:6,width:"100%",children:[(0,s.jsxs)(E.a,{position:"relative",width:"100%",children:[(0,s.jsx)(qe,{background:"neutral200",height:"100%",left:"50%",position:"absolute",top:"0",width:2,zIndex:1}),(0,s.jsx)(m.s,{direction:"column",alignItems:"stretch",gap:6,zIndex:2,position:"relative",as:"ol",children:n.map((f,h)=>{const W=Number(f?.id??f.__temp_key__);return(0,s.jsx)(E.a,{as:"li",children:(0,s.jsx)(Xe,{id:W,index:h,isOpen:!f.id,canDelete:n.length>1&&e,canReorder:n.length>1,canUpdate:a,stagesCount:n.length})},`stage-${W}`)})})]}),a&&(0,s.jsx)(pe,{type:"button",onClick:()=>{o(ge({name:""})),d("willCreateStage")},children:c({id:"Settings.review-workflows.stage.add",defaultMessage:"Add new stage"})})]})},tt=(0,C.default)(O.fe)`
  padding-left: ${({theme:e})=>e.spaces[7]};
`,st=(0,C.default)(w.o)`
  font-style: italic;
`,at=({canUpdate:e=!0})=>{const{formatMessage:a,locale:n}=(0,N.A)(),c=(0,j.wA)(),o=(0,j.d4)(Ke),d=(0,j.d4)(he),f=(0,j.d4)(Ue),[h,W,ae]=(0,F.Mt)("name"),[V,oe,ne]=(0,F.Mt)("contentTypes"),Q=(0,R.QM)(n,{sensitivity:"base"});return(0,s.jsxs)(p.x,{background:"neutral0",hasRadius:!0,gap:4,padding:6,shadow:"tableShadow",children:[(0,s.jsx)(u.E,{col:6,children:(0,s.jsx)(I.k,{...h,id:h.name,disabled:!e,label:a({id:"Settings.review-workflows.workflow.name.label",defaultMessage:"Workflow Name"}),error:W.error??!1,onChange:_=>{c(ue({name:_.target.value})),ae.setValue(_.target.value)},required:!0})}),o&&(0,s.jsx)(u.E,{col:6,children:(0,s.jsx)(O.KF,{...V,customizeContent:_=>a({id:"Settings.review-workflows.workflow.contentTypes.displayValue",defaultMessage:"{count} {count, plural, one {content type} other {content types}} selected"},{count:_?.length}),disabled:!e,error:oe.error??!1,id:V.name,label:a({id:"Settings.review-workflows.workflow.contentTypes.label",defaultMessage:"Associated to"}),onChange:_=>{c(ue({contentTypes:_})),ne.setValue(_)},placeholder:a({id:"Settings.review-workflows.workflow.contentTypes.placeholder",defaultMessage:"Select"}),children:[...o.collectionTypes.length>0?[{label:a({id:"Settings.review-workflows.workflow.contentTypes.collectionTypes.label",defaultMessage:"Collection Types"}),children:[...o.collectionTypes].sort((_,g)=>Q.compare(_.info.displayName,g.info.displayName)).map(_=>({label:_.info.displayName,value:_.uid}))}]:[],...o.singleTypes.length>0?[{label:a({id:"Settings.review-workflows.workflow.contentTypes.singleTypes.label",defaultMessage:"Single Types"}),children:[...o.singleTypes].map(_=>({label:_.info.displayName,value:_.uid}))}]:[]].map(_=>{if("children"in _)return(0,s.jsx)(O.np,{label:_.label,values:_.children.map(g=>g.value.toString()),children:_.children.map(g=>{const{name:re}=f?.find(P=>(d&&P.id!==d.id||!d)&&P.contentTypes.includes(g.value))??{};return(0,s.jsx)(tt,{value:g.value,children:(0,s.jsx)(w.o,{children:a({id:"Settings.review-workflows.workflow.contentTypes.assigned.notice",defaultMessage:"{label} {name, select, undefined {} other {<i>(assigned to <em>{name}</em> workflow)</i>}}"},{label:g.label,name:re,em:(...P)=>(0,s.jsx)(w.o,{as:"em",fontWeight:"bold",children:P}),i:(...P)=>(0,s.jsx)(st,{children:P})})})},g.value)})},_.label)})})})]})};async function ot({values:e,formatMessage:a}){const n=T.Ik({contentTypes:T.YO().of(T.Yj()),name:T.Yj().max(255,a({id:"Settings.review-workflows.validation.name.max-length",defaultMessage:"Name can not be longer than 255 characters"})).required(),stages:T.YO().of(T.Ik().shape({name:T.Yj().required(a({id:"Settings.review-workflows.validation.stage.name",defaultMessage:"Name is required"})).max(255,a({id:"Settings.review-workflows.validation.stage.max-length",defaultMessage:"Name can not be longer than 255 characters"})).test("unique-name",a({id:"Settings.review-workflows.validation.stage.duplicate",defaultMessage:"Stage name must be unique"}),function(c){const{options:{context:o}}=this;return o?.stages.filter(d=>d.name===c).length===1}),color:T.Yj().required(a({id:"Settings.review-workflows.validation.stage.color",defaultMessage:"Color is required"})).matches(/^#(?:[0-9a-fA-F]{3}){1,2}$/i),permissions:T.YO(T.Ik({role:T.ai().strict().typeError(a({id:"Settings.review-workflows.validation.stage.permissions.role.number",defaultMessage:"Role must be of type number"})).required(),action:T.Yj().required({id:"Settings.review-workflows.validation.stage.permissions.action.required",defaultMessage:"Action is a required argument"})})).strict()})).min(1)});try{return await n.validate(e,{abortEarly:!1,context:e}),!0}catch(c){const o={};return c instanceof T.yI&&c.inner.forEach(d=>{d.path&&Pe(o,d.path,d.message)}),o}}}}]);
